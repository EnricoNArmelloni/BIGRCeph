# Description ####
# Generate samples from tabular data and tables extracted from pictures
rm(list=ls())
# set paths
project.dir="C:/Users/e.armelloni/OneDrive/Lezioni/Lavoro/PhD/Activities/Task5/analysis/BIGRCeph"
read.dir='results'
model.dir='results/model_fits'
save.dir='results'
setwd(project.dir)
# libraries and functions
library(tidyverse)
library(ggpubr)
library(gridExtra)
library(grid)
source('code/R/supporting_functions.R')
### get data ####
best.M1=readRDS(file.path(model.dir, 'M1_4_J_fit.RDS'))
best.M2=readRDS(file.path(model.dir, 'M2_4_Z_fit.RDS'))
M.data=read_csv("data/input_data.csv")
M1.data=read_csv("data/M1_model_data.csv")
M2.data=read_csv("data/M2_model_data.csv")
M12.data=rbind(M1.data, M2.data)
### get posteriors ####
M1.posteriors=format.posteriors(best.M1)
M2.posteriors=format.posteriors(best.M2)
M1.post.tab=data.frame(mean=apply(M1.posteriors,2,mean))
M1.post.tab$sd=apply(M1.posteriors,2,sd)
M1.post.tab$var=rownames(M1.post.tab)
M1.post.tab$distr=paste0(round(M1.post.tab$mean, digits=2),' , ', round(M1.post.tab$sd, digits=2) )
View(M1.post.tab)
write.csv(M1.post.tab, 'results/other_tables/m1_post_avg.csv', row.names = F)
M2.post.tab=data.frame(mean=apply(M2.posteriors,2,mean))
M2.post.tab$sd=apply(M2.posteriors,2,sd)
M2.post.tab$var=rownames(M2.post.tab)
M2.post.tab$distr=paste0('~ N(', round(M2.post.tab$mean, digits=2),',', round(M2.post.tab$sd, digits=2) ,')')
write.csv(M2.post.tab, 'results/other_tables/m2_post_avg.csv', row.names = F)
index.F.M2=distinct(M2.data, Index.food, main_prey)
index.F.M2
